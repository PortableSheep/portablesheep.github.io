!function(t,e,n){function i(i,s){this.options=t.extend({},r,s),this.element=i,this.$window=t(e),this.$document=t(n),this.init()}var s="weeble",r={target:null};i.prototype={init:function(){void 0===this.$menu&&(this.$menu=t(this.element).addClass("weeble-menu").detach().appendTo("body"),this.$menu.on("click","li",this.menuItemClickHandler.bind(this)),this.$document.on("contextmenu",this.options.target,this.contextMenuHandler.bind(this)))},contextMenuHandler:function(t){t.preventDefault(),this.$menu.css({top:t.pageY,left:t.pageX}).show(),this.$document.one("click",function(){this.$menu.hide()}.bind(this))},menuItemClickHandler:function(e){var n=t(e.target);n.is("li")||(n=n.parents("li:first"));var i=t("li",this.$menu).index(n[0])+1;this._trigger("onItemClick",[n,i])},_trigger:function(e,n){var i=t.Event(s+"_"+e);return n?n.unshift(this):n=[this],this.element.triggerHandler(i,n),i.isDefaultPrevented()===!1}},t.fn[s]=function(e){var n=t.isPlainObject(e)?e:{},r=t.data(this,"plugin_"+s);if(r){if("string"==typeof e&&r[e]&&t.isFunction(r[e])){var u=arguments.length>=2?Array.prototype.slice.call(arguments,1):[],o=r[e].apply(r,u);return void 0===o?this:o}return this}return r=new i(this,n),t.data(this,"plugin_"+s,r),this}}(jQuery,window,document);
